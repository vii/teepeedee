2002-12-31  John Fremlin  <john@fremlin.de>

	* lib/iocontextresponder.cc (report_connect): added

	* src/server.cc (read_config): use reuse_addr

	* lib/xfertable.cc (check_timeouts): moved out of do_poll

	* lib/iocontext.cc (sockaddr_to_str): remove pointless '\0'

2002-12-30  John Fremlin  <john@fremlin.de>

	* lib/iocontext.hh (class IOContext): do not call timedout wrongly

	* lib/iocontext.cc (set_reuse_addr): added

	* lib/iocontextresponder.cc (read_in): hangup on EOF
	(io): handle hangup in read_in

	* lib/listener.cc (io): loop round accept

2002-12-21  John Fremlin  <john@fremlin.de>

	* lib/iocontext.cc (getsockname): fix error reporting

	* src/ftplistlong.cc (prepare_entry): pad out listing items
	to make them more readable [reported by Felix von Leitner]

	* src/httpcontrol.cc (do_cmd_get): add Content-Type to directory
	listings [reported by Felix von Leitner]

2002-12-20  John Fremlin  <john@fremlin.de>

	* src/ftpcontrol.cc (do_cmd_list): ignore ls(1) options
	(finished_reading): more viciously strip control sequences

	* src/httplist.cc (prepare_entry): add initial "/" so as not to
	confuse browsers

	* lib/iocontextxfer.cc (hangup): fixed problem where buffered data
	would not be written out due to data connection hanging up

	* src/httpcontrol.cc (persistant): fixed order of tests

	* lib/iocontext.cc (getpeername): added

	* lib/iocontextresponder.cc (read_done): added logging

	* src/ftpcontrol.cc: made cmd_help tell more
	(do_cmd_list): add globbing

	* lib/filelisterglob.hh: added

2002-12-19  John Fremlin  <john@fremlin.de>

	* lib/sendfile.cc: Fixed filedescriptor leak

	* src/ftpcontrol.cc (FTPControl): Fixed lack of braces round PASV
	mode port string - doh!

