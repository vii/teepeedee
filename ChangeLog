2003-03-08  John Fremlin  <john@fremlin.de>

	* src/ftpcontrol.cc: help for specific commands

2003-02-11  John Fremlin  <john@fremlin.de>

	* src/ftpcontrol.cc (cmd_port): removed unnecessary assert_no_xfer
	which screws up some ftp clients

2003-01-28  John Fremlin  <john@fremlin.de>

	* configure.in: added AC_SYS_LARGEFILE to automatically support
	large files
	stop using config.h as not all files include it

	* lib/sendfile.cc (io): refactored into read_in and write_out

	* lib/sendfile.hh (class Sendfile ): increased buffer size

2003-01-19  John Fremlin  <john@fremlin.de>

	* src/ftpmlstprinter.hh (class FTPMlstPrinter): add a / at the
	beginning of filenames to confirm more properly to the spec

2003-01-18  John Fremlin  <john@fremlin.de>

	* src/ftpcontrol.cc (FTPControl): clear _port_addr before doing
	getsockname in case of failure

2003-01-17  John Fremlin  <john@fremlin.de>

	* lib/iocontext.cc (getsockname): no longer refs desc in error
	case to avoid infinite recursion
	(bind_ipv4): clear sockaddr_in to 0 before we bind for NetBSD

	* lib/iocontextresponder.cc (report_connect): add timestamp

	* lib/iocontextresponder.hh (set_fd): added to call report_connect

	* src/user.cc (authenticate): return already if password_plain
	does not match given password

	* lib/dircontainer.cc (readdir_r): implement a readdir_r for netbsd

	* configure.in: check for presence of no sendfile function

	* lib/sendfile.cc (system_sendfile): added version for systems
	without any sendfile

	* lib/conftree.hh (class ConfTree): renamed get(...,std::time_t)
	to get_seconds to help it compile on NetBSD/alpha

2002-12-31  John Fremlin  <john@fremlin.de>

	* lib/iocontextresponder.cc (report_connect): added

	* src/server.cc (read_config): use reuse_addr

	* lib/xfertable.cc (check_timeouts): moved out of do_poll

	* lib/iocontext.cc (sockaddr_to_str): remove pointless '\0'

2002-12-30  John Fremlin  <john@fremlin.de>

	* lib/iocontext.hh (class IOContext): do not call timedout wrongly

	* lib/iocontext.cc (set_reuse_addr): added

	* lib/iocontextresponder.cc (read_in): hangup on EOF
	(io): handle hangup in read_in

	* lib/listener.cc (io): loop round accept

2002-12-21  John Fremlin  <john@fremlin.de>

	* lib/iocontext.cc (getsockname): fix error reporting

	* src/ftplistlong.cc (prepare_entry): pad out listing items
	to make them more readable [reported by Felix von Leitner]

	* src/httpcontrol.cc (do_cmd_get): add Content-Type to directory
	listings [reported by Felix von Leitner]

2002-12-20  John Fremlin  <john@fremlin.de>

	* src/ftpcontrol.cc (do_cmd_list): ignore ls(1) options
	(finished_reading): more viciously strip control sequences

	* src/httplist.cc (prepare_entry): add initial "/" so as not to
	confuse browsers

	* lib/iocontextxfer.cc (hangup): fixed problem where buffered data
	would not be written out due to data connection hanging up

	* src/httpcontrol.cc (persistant): fixed order of tests

	* lib/iocontext.cc (getpeername): added

	* lib/iocontextresponder.cc (read_done): added logging

	* src/ftpcontrol.cc: made cmd_help tell more
	(do_cmd_list): add globbing

	* lib/filelisterglob.hh: added

2002-12-19  John Fremlin  <john@fremlin.de>

	* lib/sendfile.cc: Fixed filedescriptor leak

	* src/ftpcontrol.cc (FTPControl): Fixed lack of braces round PASV
	mode port string - doh!

